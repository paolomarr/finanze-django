# Pull base image
FROM node:21-alpine

WORKDIR /app

# Install dependencies
COPY ./movimenti-fe/package.json .
COPY ./movimenti-fe/lingui.config.js .

RUN npm install

COPY ./movimenti-fe/public/ ./public
COPY ./movimenti-fe/src/ ./src

RUN npm run extract && npm run compile && npm run build

CMD ["serve", "-s", "build", "-l", "3300"]
