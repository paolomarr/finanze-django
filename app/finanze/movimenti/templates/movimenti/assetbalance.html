{% extends 'movimenti/base.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% block extra_script %}
{{ block.super }}
<script type="text/javascript" src="{% static 'movimenti/scripts.js' %}"></script>
<script type="text/javascript" src="{% static 'movimenti/assets.js' %}"></script>
{% endblock %}
{% block title %}
Registra bilancio corrente
{% endblock %}
{% block content %}
<div class="row">
	<div class="col col-12 col-md-6">
		<form action="/movimenti/assets" method="post">
	{% csrf_token %}
	{% bootstrap_form form exclude='notes' %}
	<div class="mb-3">
		<div id="itemslist"></div>
		<button type="button" id="addbutton" class="btn btn-info btn-sm">Add entry</button>
		<div>TOTAL: <span id="sum">{{financeassets | floatformat:2}}</span></div>
	</div>
	{% bootstrap_button button_type="button" content="Submit" name="submit" %}
	<!-- <button class="btn btn-primary" type="submit" value="Submit">Registra</button> -->
		</form>
	</div>
</div>
<div class="row">
	<div class="col col-12 col-md-6">
		<div id="messages"></div>
	</div>
</div>
<div class="row">
	<div class="col"><table>
			<thead>
				<tr>
					<th>Date</th>
					<th>Total</th>
					<th class="lessimportant">Error</th>
				</tr>
			</thead>
			<tbody>
				{% for asset in assets %}
				<tr>
					<td>{{asset.date | date:'d/m/Y H:i'}}</td>
					<td>{{asset.totbalance | floatformat:2}}</td>
					<td class="lessimportant">{{asset.error | floatformat:2 }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table></div>
</div>
{% endblock %}
{% block end_scripts %}
{{ block.super }}
<script type="text/javascript">
	{% for item in latests %}
	insertNewListItem("{{item.notes}}", {{item.balance}});
	{% endfor %}
</script>
{% endblock %}
