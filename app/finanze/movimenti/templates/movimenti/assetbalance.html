{% extends 'movimenti/base.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% block extra_script %}
{{ block.super }}
<script type="text/javascript" src="{% static 'movimenti/scripts.js' %}"></script>
<script type="text/javascript" src="{% static 'movimenti/assets.js' %}"></script>
{% endblock %}
{% block title %}
Registra bilancio corrente
{% endblock %}
{% block content %}
<div class="row">
	<div class="col col-12 col-md-6">
		<form action="/movimenti/assets" method="post">
	{% csrf_token %}
	{% bootstrap_form form %}
	<div class="mb-3">
		<div id="itemslist">
			<div class="row" data-index="0">
				<div class="col col-6">
					<input type="number" step="0.01" id="balance_item_0" onchange="computeSum()" class="form-control"
					value="{{financeassets | floatformat:2}}" />
				</div>
				<div class="col col-6">
					<button type="button" onclick="removeButtonClick(this)" class="col btn btn-light btn-sm remove-button" data-index="0">Remove
					</button>
				</div>
			</div>
		</div>
		<button type="button" id="addbutton" class="btn btn-info btn-sm">Add entry</button>
		<label for="sum">Total</label><div id="sum">{{financeassets | floatformat:2}}</div>
	</div>
	{% bootstrap_button button_type="submit" content="Submit" %}
	<!-- <button class="btn btn-primary" type="submit" value="Submit">Registra</button> -->
		</form>
	</div>
</div>
<div class="row">
	<div class="col"><table>
			<thead>
				<tr>
					<th>Date</th>
					<th>Notes</th>
					<th>Total</th>
					<th class="lessimportant">Error</th>
				</tr>
			</thead>
			<tbody>
				{% for asset in assets %}
				<tr>
					<td>{{asset.date | date:'d/m/Y H:i'}}</td>
					<td>{{asset.notes}}</td>
					<td>{{asset.balance | floatformat:2}}</td>
					<td class="lessimportant">{{asset.error | floatformat:2 }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table></div>
</div>
{% endblock %}
